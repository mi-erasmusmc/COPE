<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1">

<style type="text/css">
@font-face {
font-family: octicons-link;
src: url(data:font/woff;charset=utf-8;base64,d09GRgABAAAAAAZwABAAAAAACFQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABEU0lHAAAGaAAAAAgAAAAIAAAAAUdTVUIAAAZcAAAACgAAAAoAAQAAT1MvMgAAAyQAAABJAAAAYFYEU3RjbWFwAAADcAAAAEUAAACAAJThvmN2dCAAAATkAAAABAAAAAQAAAAAZnBnbQAAA7gAAACyAAABCUM+8IhnYXNwAAAGTAAAABAAAAAQABoAI2dseWYAAAFsAAABPAAAAZwcEq9taGVhZAAAAsgAAAA0AAAANgh4a91oaGVhAAADCAAAABoAAAAkCA8DRGhtdHgAAAL8AAAADAAAAAwGAACfbG9jYQAAAsAAAAAIAAAACABiATBtYXhwAAACqAAAABgAAAAgAA8ASm5hbWUAAAToAAABQgAAAlXu73sOcG9zdAAABiwAAAAeAAAAME3QpOBwcmVwAAAEbAAAAHYAAAB/aFGpk3jaTY6xa8JAGMW/O62BDi0tJLYQincXEypYIiGJjSgHniQ6umTsUEyLm5BV6NDBP8Tpts6F0v+k/0an2i+itHDw3v2+9+DBKTzsJNnWJNTgHEy4BgG3EMI9DCEDOGEXzDADU5hBKMIgNPZqoD3SilVaXZCER3/I7AtxEJLtzzuZfI+VVkprxTlXShWKb3TBecG11rwoNlmmn1P2WYcJczl32etSpKnziC7lQyWe1smVPy/Lt7Kc+0vWY/gAgIIEqAN9we0pwKXreiMasxvabDQMM4riO+qxM2ogwDGOZTXxwxDiycQIcoYFBLj5K3EIaSctAq2kTYiw+ymhce7vwM9jSqO8JyVd5RH9gyTt2+J/yUmYlIR0s04n6+7Vm1ozezUeLEaUjhaDSuXHwVRgvLJn1tQ7xiuVv/ocTRF42mNgZGBgYGbwZOBiAAFGJBIMAAizAFoAAABiAGIAznjaY2BkYGAA4in8zwXi+W2+MjCzMIDApSwvXzC97Z4Ig8N/BxYGZgcgl52BCSQKAA3jCV8CAABfAAAAAAQAAEB42mNgZGBg4f3vACQZQABIMjKgAmYAKEgBXgAAeNpjYGY6wTiBgZWBg2kmUxoDA4MPhGZMYzBi1AHygVLYQUCaawqDA4PChxhmh/8ODDEsvAwHgMKMIDnGL0x7gJQCAwMAJd4MFwAAAHjaY2BgYGaA4DAGRgYQkAHyGMF8NgYrIM3JIAGVYYDT+AEjAwuDFpBmA9KMDEwMCh9i/v8H8sH0/4dQc1iAmAkALaUKLgAAAHjaTY9LDsIgEIbtgqHUPpDi3gPoBVyRTmTddOmqTXThEXqrob2gQ1FjwpDvfwCBdmdXC5AVKFu3e5MfNFJ29KTQT48Ob9/lqYwOGZxeUelN2U2R6+cArgtCJpauW7UQBqnFkUsjAY/kOU1cP+DAgvxwn1chZDwUbd6CFimGXwzwF6tPbFIcjEl+vvmM/byA48e6tWrKArm4ZJlCbdsrxksL1AwWn/yBSJKpYbq8AXaaTb8AAHja28jAwOC00ZrBeQNDQOWO//sdBBgYGRiYWYAEELEwMTE4uzo5Zzo5b2BxdnFOcALxNjA6b2ByTswC8jYwg0VlNuoCTWAMqNzMzsoK1rEhNqByEyerg5PMJlYuVueETKcd/89uBpnpvIEVomeHLoMsAAe1Id4AAAAAAAB42oWQT07CQBTGv0JBhagk7HQzKxca2sJCE1hDt4QF+9JOS0nbaaYDCQfwCJ7Au3AHj+LO13FMmm6cl7785vven0kBjHCBhfpYuNa5Ph1c0e2Xu3jEvWG7UdPDLZ4N92nOm+EBXuAbHmIMSRMs+4aUEd4Nd3CHD8NdvOLTsA2GL8M9PODbcL+hD7C1xoaHeLJSEao0FEW14ckxC+TU8TxvsY6X0eLPmRhry2WVioLpkrbp84LLQPGI7c6sOiUzpWIWS5GzlSgUzzLBSikOPFTOXqly7rqx0Z1Q5BAIoZBSFihQYQOOBEdkCOgXTOHA07HAGjGWiIjaPZNW13/+lm6S9FT7rLHFJ6fQbkATOG1j2OFMucKJJsxIVfQORl+9Jyda6Sl1dUYhSCm1dyClfoeDve4qMYdLEbfqHf3O/AdDumsjAAB42mNgYoAAZQYjBmyAGYQZmdhL8zLdDEydARfoAqIAAAABAAMABwAKABMAB///AA8AAQAAAAAAAAAAAAAAAAABAAAAAA==) format('woff');
}
body {
-webkit-text-size-adjust: 100%;
text-size-adjust: 100%;
color: #333;
font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
font-size: 16px;
line-height: 1.6;
word-wrap: break-word;
}
a {
background-color: transparent;
}
a:active,
a:hover {
outline: 0;
}
strong {
font-weight: bold;
}
h1 {
font-size: 2em;
margin: 0.67em 0;
}
img {
border: 0;
}
hr {
box-sizing: content-box;
height: 0;
}
pre {
overflow: auto;
}
code,
kbd,
pre {
font-family: monospace, monospace;
font-size: 1em;
}
input {
color: inherit;
font: inherit;
margin: 0;
}
html input[disabled] {
cursor: default;
}
input {
line-height: normal;
}
input[type="checkbox"] {
box-sizing: border-box;
padding: 0;
}
table {
border-collapse: collapse;
border-spacing: 0;
}
td,
th {
padding: 0;
}
* {
box-sizing: border-box;
}
input {
font: 13px / 1.4 Helvetica, arial, nimbussansl, liberationsans, freesans, clean, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
}
a {
color: #4078c0;
text-decoration: none;
}
a:hover,
a:active {
text-decoration: underline;
}
hr {
height: 0;
margin: 15px 0;
overflow: hidden;
background: transparent;
border: 0;
border-bottom: 1px solid #ddd;
}
hr:before {
display: table;
content: "";
}
hr:after {
display: table;
clear: both;
content: "";
}
h1,
h2,
h3,
h4,
h5,
h6 {
margin-top: 15px;
margin-bottom: 15px;
line-height: 1.1;
}
h1 {
font-size: 30px;
}
h2 {
font-size: 21px;
}
h3 {
font-size: 16px;
}
h4 {
font-size: 14px;
}
h5 {
font-size: 12px;
}
h6 {
font-size: 11px;
}
blockquote {
margin: 0;
}
ul,
ol {
padding: 0;
margin-top: 0;
margin-bottom: 0;
}
ol ol,
ul ol {
list-style-type: lower-roman;
}
ul ul ol,
ul ol ol,
ol ul ol,
ol ol ol {
list-style-type: lower-alpha;
}
dd {
margin-left: 0;
}
code {
font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
font-size: 12px;
}
pre {
margin-top: 0;
margin-bottom: 0;
font: 12px Consolas, "Liberation Mono", Menlo, Courier, monospace;
}
.select::-ms-expand {
opacity: 0;
}
.octicon {
font: normal normal normal 16px/1 octicons-link;
display: inline-block;
text-decoration: none;
text-rendering: auto;
-webkit-font-smoothing: antialiased;
-moz-osx-font-smoothing: grayscale;
-webkit-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none;
}
.octicon-link:before {
content: '\f05c';
}
.markdown-body:before {
display: table;
content: "";
}
.markdown-body:after {
display: table;
clear: both;
content: "";
}
.markdown-body>*:first-child {
margin-top: 0 !important;
}
.markdown-body>*:last-child {
margin-bottom: 0 !important;
}
a:not([href]) {
color: inherit;
text-decoration: none;
}
.anchor {
display: inline-block;
padding-right: 2px;
margin-left: -18px;
}
.anchor:focus {
outline: none;
}
h1,
h2,
h3,
h4,
h5,
h6 {
margin-top: 1em;
margin-bottom: 16px;
font-weight: bold;
line-height: 1.4;
}
h1 .octicon-link,
h2 .octicon-link,
h3 .octicon-link,
h4 .octicon-link,
h5 .octicon-link,
h6 .octicon-link {
color: #000;
vertical-align: middle;
visibility: hidden;
}
h1:hover .anchor,
h2:hover .anchor,
h3:hover .anchor,
h4:hover .anchor,
h5:hover .anchor,
h6:hover .anchor {
text-decoration: none;
}
h1:hover .anchor .octicon-link,
h2:hover .anchor .octicon-link,
h3:hover .anchor .octicon-link,
h4:hover .anchor .octicon-link,
h5:hover .anchor .octicon-link,
h6:hover .anchor .octicon-link {
visibility: visible;
}
h1 {
padding-bottom: 0.3em;
font-size: 2.25em;
line-height: 1.2;
border-bottom: 1px solid #eee;
}
h1 .anchor {
line-height: 1;
}
h2 {
padding-bottom: 0.3em;
font-size: 1.75em;
line-height: 1.225;
border-bottom: 1px solid #eee;
}
h2 .anchor {
line-height: 1;
}
h3 {
font-size: 1.5em;
line-height: 1.43;
}
h3 .anchor {
line-height: 1.2;
}
h4 {
font-size: 1.25em;
}
h4 .anchor {
line-height: 1.2;
}
h5 {
font-size: 1em;
}
h5 .anchor {
line-height: 1.1;
}
h6 {
font-size: 1em;
color: #777;
}
h6 .anchor {
line-height: 1.1;
}
p,
blockquote,
ul,
ol,
dl,
table,
pre {
margin-top: 0;
margin-bottom: 16px;
}
hr {
height: 4px;
padding: 0;
margin: 16px 0;
background-color: #e7e7e7;
border: 0 none;
}
ul,
ol {
padding-left: 2em;
}
ul ul,
ul ol,
ol ol,
ol ul {
margin-top: 0;
margin-bottom: 0;
}
li>p {
margin-top: 16px;
}
dl {
padding: 0;
}
dl dt {
padding: 0;
margin-top: 16px;
font-size: 1em;
font-style: italic;
font-weight: bold;
}
dl dd {
padding: 0 16px;
margin-bottom: 16px;
}
blockquote {
padding: 0 15px;
color: #777;
border-left: 4px solid #ddd;
}
blockquote>:first-child {
margin-top: 0;
}
blockquote>:last-child {
margin-bottom: 0;
}
table {
display: block;
width: 100%;
overflow: auto;
word-break: normal;
word-break: keep-all;
}
table th {
font-weight: bold;
}
table th,
table td {
padding: 6px 13px;
border: 1px solid #ddd;
}
table tr {
background-color: #fff;
border-top: 1px solid #ccc;
}
table tr:nth-child(2n) {
background-color: #f8f8f8;
}
img {
max-width: 100%;
box-sizing: content-box;
background-color: #fff;
}
code {
padding: 0;
padding-top: 0.2em;
padding-bottom: 0.2em;
margin: 0;
font-size: 85%;
background-color: rgba(0,0,0,0.04);
border-radius: 3px;
}
code:before,
code:after {
letter-spacing: -0.2em;
content: "\00a0";
}
pre>code {
padding: 0;
margin: 0;
font-size: 100%;
word-break: normal;
white-space: pre;
background: transparent;
border: 0;
}
.highlight {
margin-bottom: 16px;
}
.highlight pre,
pre {
padding: 16px;
overflow: auto;
font-size: 85%;
line-height: 1.45;
background-color: #f7f7f7;
border-radius: 3px;
}
.highlight pre {
margin-bottom: 0;
word-break: normal;
}
pre {
word-wrap: normal;
}
pre code {
display: inline;
max-width: initial;
padding: 0;
margin: 0;
overflow: initial;
line-height: inherit;
word-wrap: normal;
background-color: transparent;
border: 0;
}
pre code:before,
pre code:after {
content: normal;
}
kbd {
display: inline-block;
padding: 3px 5px;
font-size: 11px;
line-height: 10px;
color: #555;
vertical-align: middle;
background-color: #fcfcfc;
border: solid 1px #ccc;
border-bottom-color: #bbb;
border-radius: 3px;
box-shadow: inset 0 -1px 0 #bbb;
}
.pl-c {
color: #969896;
}
.pl-c1,
.pl-s .pl-v {
color: #0086b3;
}
.pl-e,
.pl-en {
color: #795da3;
}
.pl-s .pl-s1,
.pl-smi {
color: #333;
}
.pl-ent {
color: #63a35c;
}
.pl-k {
color: #a71d5d;
}
.pl-pds,
.pl-s,
.pl-s .pl-pse .pl-s1,
.pl-sr,
.pl-sr .pl-cce,
.pl-sr .pl-sra,
.pl-sr .pl-sre {
color: #183691;
}
.pl-v {
color: #ed6a43;
}
.pl-id {
color: #b52a1d;
}
.pl-ii {
background-color: #b52a1d;
color: #f8f8f8;
}
.pl-sr .pl-cce {
color: #63a35c;
font-weight: bold;
}
.pl-ml {
color: #693a17;
}
.pl-mh,
.pl-mh .pl-en,
.pl-ms {
color: #1d3e81;
font-weight: bold;
}
.pl-mq {
color: #008080;
}
.pl-mi {
color: #333;
font-style: italic;
}
.pl-mb {
color: #333;
font-weight: bold;
}
.pl-md {
background-color: #ffecec;
color: #bd2c00;
}
.pl-mi1 {
background-color: #eaffea;
color: #55a532;
}
.pl-mdr {
color: #795da3;
font-weight: bold;
}
.pl-mo {
color: #1d3e81;
}
kbd {
display: inline-block;
padding: 3px 5px;
font: 11px Consolas, "Liberation Mono", Menlo, Courier, monospace;
line-height: 10px;
color: #555;
vertical-align: middle;
background-color: #fcfcfc;
border: solid 1px #ccc;
border-bottom-color: #bbb;
border-radius: 3px;
box-shadow: inset 0 -1px 0 #bbb;
}
.task-list-item {
list-style-type: none;
}
.task-list-item+.task-list-item {
margin-top: 3px;
}
.task-list-item input {
margin: 0 0.35em 0.25em -1.6em;
vertical-align: middle;
}
:checked+.radio-label {
z-index: 1;
position: relative;
border-color: #4078c0;
}
.sourceLine {
display: inline-block;
}
code .kw { color: #000000; }
code .dt { color: #ed6a43; }
code .dv { color: #009999; }
code .bn { color: #009999; }
code .fl { color: #009999; }
code .ch { color: #009999; }
code .st { color: #183691; }
code .co { color: #969896; }
code .ot { color: #0086b3; }
code .al { color: #a61717; }
code .fu { color: #63a35c; }
code .er { color: #a61717; background-color: #e3d2d2; }
code .wa { color: #000000; }
code .cn { color: #008080; }
code .sc { color: #008080; }
code .vs { color: #183691; }
code .ss { color: #183691; }
code .im { color: #000000; }
code .va {color: #008080; }
code .cf { color: #000000; }
code .op { color: #000000; }
code .bu { color: #000000; }
code .ex { color: #000000; }
code .pp { color: #999999; }
code .at { color: #008080; }
code .do { color: #969896; }
code .an { color: #008080; }
code .cv { color: #008080; }
code .in { color: #008080; }
</style>
<style>
body {
  box-sizing: border-box;
  min-width: 200px;
  max-width: 980px;
  margin: 0 auto;
  padding: 45px;
  padding-top: 0px;
}
</style>

</head>

<body>

<h1 id="testing-cope">Testing COPE</h1>
<p>Alexandros Rekkas 2021-02-26</p>
<ul>
<li><a href="#testing-supporting-functions">1 Testing supporting functions</a></li>
<li><a href="#testing-server-functions">2 Testing server functions</a>
<ul>
<li><a href="#interactivity">2.1 Interactivity</a></li>
<li><a href="#handling-input-admissibility">2.2 Handling input admissibility</a></li>
</ul></li>
</ul>
<h1 id="1-testing-supporting-functions">1 Testing supporting functions</h1>
<p>This set of tests evaluates the functions used to support the server function. These functions are used for calculating relevant quantities, e.g. 28-day mortality risk.</p>
<p>Function <code>createModelMatrix</code> creates the model matrix based on a set of covariates and a list of transformations.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>transformationsMortality &lt;-<span class="st"> </span><span class="kw">list</span>(</span>
<span id="cb1-2"><a href="#cb1-2"></a>    <span class="dt">age             =</span> identity,</span>
<span id="cb1-3"><a href="#cb1-3"></a>    <span class="dt">respiratoryRate =</span> log,</span>
<span id="cb1-4"><a href="#cb1-4"></a>    <span class="dt">crp             =</span> log,</span>
<span id="cb1-5"><a href="#cb1-5"></a>    <span class="dt">ldh             =</span> log,</span>
<span id="cb1-6"><a href="#cb1-6"></a>    <span class="dt">albumin         =</span> log,</span>
<span id="cb1-7"><a href="#cb1-7"></a>    <span class="dt">urea            =</span> log</span>
<span id="cb1-8"><a href="#cb1-8"></a>)</span>
<span id="cb1-9"><a href="#cb1-9"></a></span>
<span id="cb1-10"><a href="#cb1-10"></a></span>
<span id="cb1-11"><a href="#cb1-11"></a>testthat<span class="op">::</span><span class="kw">test_that</span>(</span>
<span id="cb1-12"><a href="#cb1-12"></a>    <span class="st">&quot;Creation of model matrix works&quot;</span>,</span>
<span id="cb1-13"><a href="#cb1-13"></a>    {</span>
<span id="cb1-14"><a href="#cb1-14"></a>        testthat<span class="op">::</span><span class="kw">expect_equal</span>(</span>
<span id="cb1-15"><a href="#cb1-15"></a>            <span class="kw">createModelMatrix</span>(</span>
<span id="cb1-16"><a href="#cb1-16"></a>                <span class="dt">covariates      =</span> <span class="kw">rep</span>(<span class="dv">1</span>, <span class="dv">6</span>),</span>
<span id="cb1-17"><a href="#cb1-17"></a>                <span class="dt">transformations =</span> transformationsMortality</span>
<span id="cb1-18"><a href="#cb1-18"></a>            ),</span>
<span id="cb1-19"><a href="#cb1-19"></a>            <span class="kw">c</span>(<span class="dv">1</span>, <span class="kw">rep</span>(<span class="dv">0</span>, <span class="dv">5</span>))</span>
<span id="cb1-20"><a href="#cb1-20"></a>        )</span>
<span id="cb1-21"><a href="#cb1-21"></a>    }</span>
<span id="cb1-22"><a href="#cb1-22"></a>)</span></code></pre></div>
<pre><code>## Test passed
</code></pre>
<p>Function <code>createLinearPredictor</code> calculates the linear predictor of a prediction based on a provided model matrix, a vector of (\beta) coefficients and an intercept</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>testthat<span class="op">::</span><span class="kw">test_that</span>(</span>
<span id="cb3-2"><a href="#cb3-2"></a>    <span class="st">&quot;Creation of linear predictor works&quot;</span>,</span>
<span id="cb3-3"><a href="#cb3-3"></a>    {</span>
<span id="cb3-4"><a href="#cb3-4"></a>        testthat<span class="op">::</span><span class="kw">expect_equal</span>(</span>
<span id="cb3-5"><a href="#cb3-5"></a>            <span class="kw">createLinearPredictor</span>(</span>
<span id="cb3-6"><a href="#cb3-6"></a>                <span class="dt">modelMatrix =</span> <span class="kw">rep</span>(<span class="dv">1</span>, <span class="dv">6</span>),</span>
<span id="cb3-7"><a href="#cb3-7"></a>                <span class="dt">beta        =</span> <span class="kw">rep</span>(<span class="dv">1</span>, <span class="dv">6</span>),</span>
<span id="cb3-8"><a href="#cb3-8"></a>                <span class="dt">intercept   =</span> <span class="dv">1</span></span>
<span id="cb3-9"><a href="#cb3-9"></a>            ),</span>
<span id="cb3-10"><a href="#cb3-10"></a>            <span class="kw">matrix</span>(<span class="dv">7</span>)</span>
<span id="cb3-11"><a href="#cb3-11"></a>        )</span>
<span id="cb3-12"><a href="#cb3-12"></a>    }</span>
<span id="cb3-13"><a href="#cb3-13"></a>)</span></code></pre></div>
<pre><code>## Test passed
</code></pre>
<p>Function <code>logisticProbability</code> calculates the logistic probability (%) based on a provided linear predictor value.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>testthat<span class="op">::</span><span class="kw">test_that</span>(</span>
<span id="cb5-2"><a href="#cb5-2"></a>    <span class="st">&quot;Logistic probability calculation from linear predictor works&quot;</span>,</span>
<span id="cb5-3"><a href="#cb5-3"></a>    {</span>
<span id="cb5-4"><a href="#cb5-4"></a>        testthat<span class="op">::</span><span class="kw">expect_equal</span>(</span>
<span id="cb5-5"><a href="#cb5-5"></a>            <span class="kw">logisticProbability</span>(<span class="dv">0</span>),</span>
<span id="cb5-6"><a href="#cb5-6"></a>            <span class="dv">50</span></span>
<span id="cb5-7"><a href="#cb5-7"></a>        )</span>
<span id="cb5-8"><a href="#cb5-8"></a>    }</span>
<span id="cb5-9"><a href="#cb5-9"></a>)</span></code></pre></div>
<pre><code>## Test passed
</code></pre>
<p>Finally, function <code>extractQuantiles</code> extracts the required quantiles for the calibration plot, based on the stored dataframe of <code>calibrationQuantiles</code>, the outcome of interest and the hospital under consideration.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>testthat<span class="op">::</span><span class="kw">test_that</span>(</span>
<span id="cb7-2"><a href="#cb7-2"></a>    <span class="st">&quot;Extraction of calibration quantiles works&quot;</span>,</span>
<span id="cb7-3"><a href="#cb7-3"></a>    {</span>
<span id="cb7-4"><a href="#cb7-4"></a>        testthat<span class="op">::</span><span class="kw">expect_equal</span>(</span>
<span id="cb7-5"><a href="#cb7-5"></a>            <span class="kw">extractQuantiles</span>(</span>
<span id="cb7-6"><a href="#cb7-6"></a>                <span class="dt">outcome              =</span> <span class="dv">1</span>,</span>
<span id="cb7-7"><a href="#cb7-7"></a>                <span class="dt">center               =</span> <span class="dv">1</span>,</span>
<span id="cb7-8"><a href="#cb7-8"></a>                <span class="dt">calibrationQuantiles =</span> <span class="kw">data.frame</span>(</span>
<span id="cb7-9"><a href="#cb7-9"></a>                    <span class="dt">center  =</span> <span class="dv">1</span>,</span>
<span id="cb7-10"><a href="#cb7-10"></a>                    <span class="dt">outcome =</span> <span class="dv">1</span>,</span>
<span id="cb7-11"><a href="#cb7-11"></a>                    <span class="dt">quant20 =</span> <span class="dv">20</span>,</span>
<span id="cb7-12"><a href="#cb7-12"></a>                    <span class="dt">quant40 =</span> <span class="dv">40</span>,</span>
<span id="cb7-13"><a href="#cb7-13"></a>                    <span class="dt">quant60 =</span> <span class="dv">60</span>,</span>
<span id="cb7-14"><a href="#cb7-14"></a>                    <span class="dt">quant80 =</span> <span class="dv">80</span></span>
<span id="cb7-15"><a href="#cb7-15"></a>                )</span>
<span id="cb7-16"><a href="#cb7-16"></a>            ),</span>
<span id="cb7-17"><a href="#cb7-17"></a>            <span class="kw">c</span>(</span>
<span id="cb7-18"><a href="#cb7-18"></a>                <span class="dt">quant20 =</span> <span class="dv">20</span>, <span class="dt">quant40 =</span> <span class="dv">40</span>,</span>
<span id="cb7-19"><a href="#cb7-19"></a>                <span class="dt">quant60 =</span> <span class="dv">60</span>, <span class="dt">quant80 =</span> <span class="dv">80</span></span>
<span id="cb7-20"><a href="#cb7-20"></a>            )</span>
<span id="cb7-21"><a href="#cb7-21"></a>        )</span>
<span id="cb7-22"><a href="#cb7-22"></a>    }</span>
<span id="cb7-23"><a href="#cb7-23"></a>)</span></code></pre></div>
<pre><code>## Test passed
</code></pre>
<h1 id="2-testing-server-functions">2 Testing server functions</h1>
<p>Here we perform a set of unit tests to ensure that server-side operations work the way they should. We start by looking at calculations tasks run within the server function.</p>
<h2 id="21-interactivity">2.1 Interactivity</h2>
<p>Interactive values, are server-side variables that depend on the input and, therefore, need to be updated whenever the user alters their selection.</p>
<p>First, the <code>currentInputData</code> reactive dataframe should contain all the provided inputs and should update accordingly, when these are changed.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>shiny<span class="op">::</span><span class="kw">testServer</span>(</span>
<span id="cb9-2"><a href="#cb9-2"></a>    <span class="dt">expr =</span> {</span>
<span id="cb9-3"><a href="#cb9-3"></a>        session<span class="op">$</span><span class="kw">setInputs</span>(</span>
<span id="cb9-4"><a href="#cb9-4"></a>            <span class="dt">age                       =</span> <span class="dv">70</span>,</span>
<span id="cb9-5"><a href="#cb9-5"></a>            <span class="dt">respiratoryRate           =</span> <span class="dv">19</span>,</span>
<span id="cb9-6"><a href="#cb9-6"></a>            <span class="dt">ldh                       =</span> <span class="dv">244</span>,</span>
<span id="cb9-7"><a href="#cb9-7"></a>            <span class="dt">crp                       =</span> <span class="dv">48</span>,</span>
<span id="cb9-8"><a href="#cb9-8"></a>            <span class="dt">albumin                   =</span> <span class="dv">39</span>,</span>
<span id="cb9-9"><a href="#cb9-9"></a>            <span class="dt">urea                      =</span> <span class="fl">6.5</span>,</span>
<span id="cb9-10"><a href="#cb9-10"></a>            <span class="dt">calculatePredictionButton =</span> <span class="st">&quot;click&quot;</span></span>
<span id="cb9-11"><a href="#cb9-11"></a>        )</span>
<span id="cb9-12"><a href="#cb9-12"></a>        </span>
<span id="cb9-13"><a href="#cb9-13"></a>        testthat<span class="op">::</span><span class="kw">test_that</span>(</span>
<span id="cb9-14"><a href="#cb9-14"></a>            <span class="st">&quot;The reactive input dataframe is correct&quot;</span>,</span>
<span id="cb9-15"><a href="#cb9-15"></a>            {</span>
<span id="cb9-16"><a href="#cb9-16"></a>                testthat<span class="op">::</span><span class="kw">expect_equal</span>(</span>
<span id="cb9-17"><a href="#cb9-17"></a>                    <span class="kw">currentInputData</span>(),</span>
<span id="cb9-18"><a href="#cb9-18"></a>                    <span class="kw">data.frame</span>(</span>
<span id="cb9-19"><a href="#cb9-19"></a>                        <span class="dt">age             =</span> <span class="dv">70</span>,</span>
<span id="cb9-20"><a href="#cb9-20"></a>                        <span class="dt">respiratoryRate =</span> <span class="dv">19</span>,</span>
<span id="cb9-21"><a href="#cb9-21"></a>                        <span class="dt">crp             =</span> <span class="dv">48</span>,</span>
<span id="cb9-22"><a href="#cb9-22"></a>                        <span class="dt">ldh             =</span> <span class="dv">244</span>,</span>
<span id="cb9-23"><a href="#cb9-23"></a>                        <span class="dt">albumin         =</span> <span class="dv">39</span>,</span>
<span id="cb9-24"><a href="#cb9-24"></a>                        <span class="dt">urea            =</span> <span class="fl">6.5</span></span>
<span id="cb9-25"><a href="#cb9-25"></a>                    )</span>
<span id="cb9-26"><a href="#cb9-26"></a>                )</span>
<span id="cb9-27"><a href="#cb9-27"></a>            }</span>
<span id="cb9-28"><a href="#cb9-28"></a>        )</span>
<span id="cb9-29"><a href="#cb9-29"></a>        </span>
<span id="cb9-30"><a href="#cb9-30"></a>        session<span class="op">$</span><span class="kw">setInputs</span>(</span>
<span id="cb9-31"><a href="#cb9-31"></a>            <span class="dt">age                       =</span> <span class="dv">70</span>,</span>
<span id="cb9-32"><a href="#cb9-32"></a>            <span class="dt">respiratoryRate           =</span> <span class="dv">19</span>,</span>
<span id="cb9-33"><a href="#cb9-33"></a>            <span class="dt">ldh                       =</span> <span class="dv">2440</span>,</span>
<span id="cb9-34"><a href="#cb9-34"></a>            <span class="dt">crp                       =</span> <span class="dv">48</span>,</span>
<span id="cb9-35"><a href="#cb9-35"></a>            <span class="dt">albumin                   =</span> <span class="dv">39</span>,</span>
<span id="cb9-36"><a href="#cb9-36"></a>            <span class="dt">urea                      =</span> <span class="fl">6.5</span>,</span>
<span id="cb9-37"><a href="#cb9-37"></a>            <span class="dt">calculatePredictionButton =</span> <span class="st">&quot;click&quot;</span></span>
<span id="cb9-38"><a href="#cb9-38"></a>        )</span>
<span id="cb9-39"><a href="#cb9-39"></a>        </span>
<span id="cb9-40"><a href="#cb9-40"></a>        testthat<span class="op">::</span><span class="kw">test_that</span>(</span>
<span id="cb9-41"><a href="#cb9-41"></a>            <span class="st">&quot;The reactive input dataframe is updated&quot;</span>,</span>
<span id="cb9-42"><a href="#cb9-42"></a>            {</span>
<span id="cb9-43"><a href="#cb9-43"></a>                testthat<span class="op">::</span><span class="kw">expect_equal</span>(</span>
<span id="cb9-44"><a href="#cb9-44"></a>                    <span class="kw">currentInputData</span>(),</span>
<span id="cb9-45"><a href="#cb9-45"></a>                    <span class="kw">data.frame</span>(</span>
<span id="cb9-46"><a href="#cb9-46"></a>                        <span class="dt">age             =</span> <span class="dv">70</span>,</span>
<span id="cb9-47"><a href="#cb9-47"></a>                        <span class="dt">respiratoryRate =</span> <span class="dv">19</span>,</span>
<span id="cb9-48"><a href="#cb9-48"></a>                        <span class="dt">crp             =</span> <span class="dv">48</span>,</span>
<span id="cb9-49"><a href="#cb9-49"></a>                        <span class="dt">ldh             =</span> <span class="dv">2440</span>,</span>
<span id="cb9-50"><a href="#cb9-50"></a>                        <span class="dt">albumin         =</span> <span class="dv">39</span>,</span>
<span id="cb9-51"><a href="#cb9-51"></a>                        <span class="dt">urea            =</span> <span class="fl">6.5</span></span>
<span id="cb9-52"><a href="#cb9-52"></a>                    )</span>
<span id="cb9-53"><a href="#cb9-53"></a>                )</span>
<span id="cb9-54"><a href="#cb9-54"></a>            }</span>
<span id="cb9-55"><a href="#cb9-55"></a>        )</span>
<span id="cb9-56"><a href="#cb9-56"></a>        </span>
<span id="cb9-57"><a href="#cb9-57"></a>    }</span>
<span id="cb9-58"><a href="#cb9-58"></a>)</span></code></pre></div>
<pre><code>## Test passed 
## Test passed
</code></pre>
<p>Next, we do the same for the variables that keep track of the current prediction and its placement, relevant to the overall predicted risk fifths, for both outcomes (mortality and ICU admission).The first set of tests evaluates if the initial input is handled appropriately and the second set evaluates if the values are updated correctly.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>shiny<span class="op">::</span><span class="kw">testServer</span>(</span>
<span id="cb11-2"><a href="#cb11-2"></a>    <span class="dt">expr =</span> {</span>
<span id="cb11-3"><a href="#cb11-3"></a>        session<span class="op">$</span><span class="kw">setInputs</span>(</span>
<span id="cb11-4"><a href="#cb11-4"></a>            <span class="dt">age                       =</span> <span class="dv">70</span>,</span>
<span id="cb11-5"><a href="#cb11-5"></a>            <span class="dt">respiratoryRate           =</span> <span class="dv">19</span>,</span>
<span id="cb11-6"><a href="#cb11-6"></a>            <span class="dt">ldh                       =</span> <span class="dv">244</span>,</span>
<span id="cb11-7"><a href="#cb11-7"></a>            <span class="dt">crp                       =</span> <span class="dv">48</span>,</span>
<span id="cb11-8"><a href="#cb11-8"></a>            <span class="dt">albumin                   =</span> <span class="dv">39</span>,</span>
<span id="cb11-9"><a href="#cb11-9"></a>            <span class="dt">urea                      =</span> <span class="fl">6.5</span>,</span>
<span id="cb11-10"><a href="#cb11-10"></a>            <span class="dt">calculatePredictionButton =</span> <span class="st">&quot;click&quot;</span></span>
<span id="cb11-11"><a href="#cb11-11"></a>        )</span>
<span id="cb11-12"><a href="#cb11-12"></a>        </span>
<span id="cb11-13"><a href="#cb11-13"></a>        testthat<span class="op">::</span><span class="kw">test_that</span>(</span>
<span id="cb11-14"><a href="#cb11-14"></a>            <span class="st">&quot;Is the prediction for the starting values correct?&quot;</span>,</span>
<span id="cb11-15"><a href="#cb11-15"></a>            testthat<span class="op">::</span><span class="kw">expect_equal</span>(</span>
<span id="cb11-16"><a href="#cb11-16"></a>                <span class="kw">currentPrediction</span>(),</span>
<span id="cb11-17"><a href="#cb11-17"></a>                <span class="kw">list</span>(</span>
<span id="cb11-18"><a href="#cb11-18"></a>                    <span class="dt">mortality =</span> <span class="fl">4.8</span>,</span>
<span id="cb11-19"><a href="#cb11-19"></a>                    <span class="dt">icu       =</span> <span class="fl">13.3</span></span>
<span id="cb11-20"><a href="#cb11-20"></a>                )</span>
<span id="cb11-21"><a href="#cb11-21"></a>            )</span>
<span id="cb11-22"><a href="#cb11-22"></a>        )</span>
<span id="cb11-23"><a href="#cb11-23"></a>        </span>
<span id="cb11-24"><a href="#cb11-24"></a>        testthat<span class="op">::</span><span class="kw">test_that</span>(</span>
<span id="cb11-25"><a href="#cb11-25"></a>            <span class="st">&quot;Is the predicted mortality risk assigned to the correct stratum of risk?&quot;</span>,</span>
<span id="cb11-26"><a href="#cb11-26"></a>            testthat<span class="op">::</span><span class="kw">expect_equal</span>(</span>
<span id="cb11-27"><a href="#cb11-27"></a>                <span class="kw">riskFifthMortality</span>(),</span>
<span id="cb11-28"><a href="#cb11-28"></a>                <span class="dv">4</span></span>
<span id="cb11-29"><a href="#cb11-29"></a>            )</span>
<span id="cb11-30"><a href="#cb11-30"></a>        )</span>
<span id="cb11-31"><a href="#cb11-31"></a>        </span>
<span id="cb11-32"><a href="#cb11-32"></a>        <span class="co"># Is the predicted ICU risk assigned to the correct stratum of risk?</span></span>
<span id="cb11-33"><a href="#cb11-33"></a>        testthat<span class="op">::</span><span class="kw">test_that</span>(</span>
<span id="cb11-34"><a href="#cb11-34"></a>            <span class="st">&quot;Is the predicted mortality risk assigned to the correct stratum of risk?&quot;</span>,</span>
<span id="cb11-35"><a href="#cb11-35"></a>            testthat<span class="op">::</span><span class="kw">expect_equal</span>(</span>
<span id="cb11-36"><a href="#cb11-36"></a>                <span class="kw">riskFifthIcu</span>(),</span>
<span id="cb11-37"><a href="#cb11-37"></a>                <span class="dv">4</span></span>
<span id="cb11-38"><a href="#cb11-38"></a>            )</span>
<span id="cb11-39"><a href="#cb11-39"></a>        )</span>
<span id="cb11-40"><a href="#cb11-40"></a>        </span>
<span id="cb11-41"><a href="#cb11-41"></a>        </span>
<span id="cb11-42"><a href="#cb11-42"></a>        session<span class="op">$</span><span class="kw">setInputs</span>(</span>
<span id="cb11-43"><a href="#cb11-43"></a>            <span class="dt">age                       =</span> <span class="dv">60</span>,</span>
<span id="cb11-44"><a href="#cb11-44"></a>            <span class="dt">respiratoryRate           =</span> <span class="dv">30</span>,</span>
<span id="cb11-45"><a href="#cb11-45"></a>            <span class="dt">ldh                       =</span> <span class="dv">400</span>,</span>
<span id="cb11-46"><a href="#cb11-46"></a>            <span class="dt">crp                       =</span> <span class="dv">100</span>,</span>
<span id="cb11-47"><a href="#cb11-47"></a>            <span class="dt">albumin                   =</span> <span class="dv">50</span>,</span>
<span id="cb11-48"><a href="#cb11-48"></a>            <span class="dt">urea                      =</span> <span class="dv">10</span>,</span>
<span id="cb11-49"><a href="#cb11-49"></a>            <span class="dt">calculatePredictionButton =</span> <span class="st">&quot;click&quot;</span></span>
<span id="cb11-50"><a href="#cb11-50"></a>        )</span>
<span id="cb11-51"><a href="#cb11-51"></a>        </span>
<span id="cb11-52"><a href="#cb11-52"></a>        testthat<span class="op">::</span><span class="kw">test_that</span>(</span>
<span id="cb11-53"><a href="#cb11-53"></a>            <span class="st">&quot;Current prediction is updated&quot;</span>,</span>
<span id="cb11-54"><a href="#cb11-54"></a>            testthat<span class="op">::</span><span class="kw">expect_equal</span>(</span>
<span id="cb11-55"><a href="#cb11-55"></a>                <span class="kw">currentPrediction</span>(),</span>
<span id="cb11-56"><a href="#cb11-56"></a>                <span class="kw">list</span>(</span>
<span id="cb11-57"><a href="#cb11-57"></a>                    <span class="dt">mortality =</span> <span class="fl">10.8</span>,</span>
<span id="cb11-58"><a href="#cb11-58"></a>                    <span class="dt">icu       =</span> <span class="fl">20.6</span></span>
<span id="cb11-59"><a href="#cb11-59"></a>                )</span>
<span id="cb11-60"><a href="#cb11-60"></a>            )</span>
<span id="cb11-61"><a href="#cb11-61"></a>        )</span>
<span id="cb11-62"><a href="#cb11-62"></a>        </span>
<span id="cb11-63"><a href="#cb11-63"></a>        testthat<span class="op">::</span><span class="kw">test_that</span>(</span>
<span id="cb11-64"><a href="#cb11-64"></a>            <span class="st">&quot;Is the predicted mortality risk assigned to the correct stratum of risk?&quot;</span>,</span>
<span id="cb11-65"><a href="#cb11-65"></a>            testthat<span class="op">::</span><span class="kw">expect_equal</span>(</span>
<span id="cb11-66"><a href="#cb11-66"></a>                <span class="kw">riskFifthMortality</span>(),</span>
<span id="cb11-67"><a href="#cb11-67"></a>                <span class="dv">5</span></span>
<span id="cb11-68"><a href="#cb11-68"></a>            )</span>
<span id="cb11-69"><a href="#cb11-69"></a>        )</span>
<span id="cb11-70"><a href="#cb11-70"></a>        </span>
<span id="cb11-71"><a href="#cb11-71"></a>        <span class="co"># Is the predicted ICU risk assigned to the correct stratum of risk?</span></span>
<span id="cb11-72"><a href="#cb11-72"></a>        testthat<span class="op">::</span><span class="kw">test_that</span>(</span>
<span id="cb11-73"><a href="#cb11-73"></a>            <span class="st">&quot;Is the predicted mortality risk assigned to the correct stratum of risk?&quot;</span>,</span>
<span id="cb11-74"><a href="#cb11-74"></a>            testthat<span class="op">::</span><span class="kw">expect_equal</span>(</span>
<span id="cb11-75"><a href="#cb11-75"></a>                <span class="kw">riskFifthIcu</span>(),</span>
<span id="cb11-76"><a href="#cb11-76"></a>                <span class="dv">5</span></span>
<span id="cb11-77"><a href="#cb11-77"></a>            )</span>
<span id="cb11-78"><a href="#cb11-78"></a>        )</span>
<span id="cb11-79"><a href="#cb11-79"></a>    }</span>
<span id="cb11-80"><a href="#cb11-80"></a>)</span></code></pre></div>
<pre><code>## Test passed 
## Test passed 
## Test passed 
## Test passed 
## Test passed 
## Test passed
</code></pre>
<h2 id="22-handling-input-admissibility">2.2 Handling input admissibility</h2>
<p>There are constraints on the input a user can provide. More specifically, all inputs need to be numeric and should be between the following limits:</p>
<table>
<thead>
<tr class="header">
<th align="left">Predictor</th>
<th align="right">Minimum</th>
<th align="right">Maximum</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Age</td>
<td align="right">0</td>
<td align="right">100</td>
</tr>
<tr class="even">
<td align="left">Respiratory rate</td>
<td align="right">10</td>
<td align="right">60</td>
</tr>
<tr class="odd">
<td align="left">LDH</td>
<td align="right">50</td>
<td align="right">4000</td>
</tr>
<tr class="even">
<td align="left">CRP</td>
<td align="right">1</td>
<td align="right">500</td>
</tr>
<tr class="odd">
<td align="left">Albumin</td>
<td align="right">10</td>
<td align="right">60</td>
</tr>
<tr class="even">
<td align="left">Urea</td>
<td align="right">1</td>
<td align="right">80</td>
</tr>
</tbody>
</table>
<p>For each input we test ensure that input is accepted when the above rules are followed and that it is ruled as non-admissible if the submitted number is outside the boundaries or if it is a character string.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>shiny<span class="op">::</span><span class="kw">testServer</span>(</span>
<span id="cb13-2"><a href="#cb13-2"></a>    <span class="dt">expr =</span> {</span>
<span id="cb13-3"><a href="#cb13-3"></a>        session<span class="op">$</span><span class="kw">setInputs</span>(</span>
<span id="cb13-4"><a href="#cb13-4"></a>            <span class="dt">age                       =</span> <span class="dv">-1</span>,</span>
<span id="cb13-5"><a href="#cb13-5"></a>            <span class="dt">respiratoryRate           =</span> <span class="dv">19</span>,</span>
<span id="cb13-6"><a href="#cb13-6"></a>            <span class="dt">ldh                       =</span> <span class="dv">244</span>,</span>
<span id="cb13-7"><a href="#cb13-7"></a>            <span class="dt">crp                       =</span> <span class="dv">48</span>,</span>
<span id="cb13-8"><a href="#cb13-8"></a>            <span class="dt">albumin                   =</span> <span class="dv">39</span>,</span>
<span id="cb13-9"><a href="#cb13-9"></a>            <span class="dt">urea                      =</span> <span class="fl">6.5</span>,</span>
<span id="cb13-10"><a href="#cb13-10"></a>            <span class="dt">calculatePredictionButton =</span> <span class="st">&quot;click&quot;</span></span>
<span id="cb13-11"><a href="#cb13-11"></a>        )</span>
<span id="cb13-12"><a href="#cb13-12"></a>        </span>
<span id="cb13-13"><a href="#cb13-13"></a>        testthat<span class="op">::</span><span class="kw">test_that</span>(</span>
<span id="cb13-14"><a href="#cb13-14"></a>            <span class="st">&quot;Non admissible age (lower)&quot;</span>,</span>
<span id="cb13-15"><a href="#cb13-15"></a>            testthat<span class="op">::</span><span class="kw">expect_equal</span>(</span>
<span id="cb13-16"><a href="#cb13-16"></a>                <span class="kw">admissibleInput</span>(),</span>
<span id="cb13-17"><a href="#cb13-17"></a>                <span class="ot">FALSE</span></span>
<span id="cb13-18"><a href="#cb13-18"></a>            )</span>
<span id="cb13-19"><a href="#cb13-19"></a>        )</span>
<span id="cb13-20"><a href="#cb13-20"></a>        </span>
<span id="cb13-21"><a href="#cb13-21"></a>        <span class="co"># age above admissible input</span></span>
<span id="cb13-22"><a href="#cb13-22"></a>        session<span class="op">$</span><span class="kw">setInputs</span>(</span>
<span id="cb13-23"><a href="#cb13-23"></a>            <span class="dt">age                       =</span> <span class="dv">101</span>,</span>
<span id="cb13-24"><a href="#cb13-24"></a>            <span class="dt">respiratoryRate           =</span> <span class="dv">19</span>,</span>
<span id="cb13-25"><a href="#cb13-25"></a>            <span class="dt">ldh                       =</span> <span class="dv">244</span>,</span>
<span id="cb13-26"><a href="#cb13-26"></a>            <span class="dt">crp                       =</span> <span class="dv">48</span>,</span>
<span id="cb13-27"><a href="#cb13-27"></a>            <span class="dt">albumin                   =</span> <span class="dv">39</span>,</span>
<span id="cb13-28"><a href="#cb13-28"></a>            <span class="dt">urea                      =</span> <span class="fl">6.5</span>,</span>
<span id="cb13-29"><a href="#cb13-29"></a>            <span class="dt">calculatePredictionButton =</span> <span class="st">&quot;click&quot;</span></span>
<span id="cb13-30"><a href="#cb13-30"></a>        )</span>
<span id="cb13-31"><a href="#cb13-31"></a>        </span>
<span id="cb13-32"><a href="#cb13-32"></a>        testthat<span class="op">::</span><span class="kw">test_that</span>(</span>
<span id="cb13-33"><a href="#cb13-33"></a>            <span class="st">&quot;Non admissible age (higher)&quot;</span>,</span>
<span id="cb13-34"><a href="#cb13-34"></a>            testthat<span class="op">::</span><span class="kw">expect_equal</span>(</span>
<span id="cb13-35"><a href="#cb13-35"></a>                <span class="kw">admissibleInput</span>(),</span>
<span id="cb13-36"><a href="#cb13-36"></a>                <span class="ot">FALSE</span></span>
<span id="cb13-37"><a href="#cb13-37"></a>            )</span>
<span id="cb13-38"><a href="#cb13-38"></a>        )</span>
<span id="cb13-39"><a href="#cb13-39"></a>        </span>
<span id="cb13-40"><a href="#cb13-40"></a>        <span class="co"># age as character input</span></span>
<span id="cb13-41"><a href="#cb13-41"></a>        session<span class="op">$</span><span class="kw">setInputs</span>(</span>
<span id="cb13-42"><a href="#cb13-42"></a>            <span class="dt">age                       =</span> <span class="st">&quot;seventy&quot;</span>,</span>
<span id="cb13-43"><a href="#cb13-43"></a>            <span class="dt">respiratoryRate           =</span> <span class="dv">19</span>,</span>
<span id="cb13-44"><a href="#cb13-44"></a>            <span class="dt">ldh                       =</span> <span class="dv">244</span>,</span>
<span id="cb13-45"><a href="#cb13-45"></a>            <span class="dt">crp                       =</span> <span class="dv">48</span>,</span>
<span id="cb13-46"><a href="#cb13-46"></a>            <span class="dt">albumin                   =</span> <span class="dv">39</span>,</span>
<span id="cb13-47"><a href="#cb13-47"></a>            <span class="dt">urea                      =</span> <span class="fl">6.5</span>,</span>
<span id="cb13-48"><a href="#cb13-48"></a>            <span class="dt">calculatePredictionButton =</span> <span class="st">&quot;click&quot;</span></span>
<span id="cb13-49"><a href="#cb13-49"></a>        )</span>
<span id="cb13-50"><a href="#cb13-50"></a>        </span>
<span id="cb13-51"><a href="#cb13-51"></a>        testthat<span class="op">::</span><span class="kw">test_that</span>(</span>
<span id="cb13-52"><a href="#cb13-52"></a>            <span class="st">&quot;Non admissible age (character)&quot;</span>,</span>
<span id="cb13-53"><a href="#cb13-53"></a>            testthat<span class="op">::</span><span class="kw">expect_equal</span>(</span>
<span id="cb13-54"><a href="#cb13-54"></a>                <span class="kw">admissibleInput</span>(),</span>
<span id="cb13-55"><a href="#cb13-55"></a>                <span class="ot">FALSE</span></span>
<span id="cb13-56"><a href="#cb13-56"></a>            )</span>
<span id="cb13-57"><a href="#cb13-57"></a>        )</span>
<span id="cb13-58"><a href="#cb13-58"></a>        </span>
<span id="cb13-59"><a href="#cb13-59"></a>        <span class="co"># respiratory rate below admissible input</span></span>
<span id="cb13-60"><a href="#cb13-60"></a>        session<span class="op">$</span><span class="kw">setInputs</span>(</span>
<span id="cb13-61"><a href="#cb13-61"></a>            <span class="dt">age                       =</span> <span class="dv">70</span>,</span>
<span id="cb13-62"><a href="#cb13-62"></a>            <span class="dt">respiratoryRate           =</span> <span class="dv">9</span>,</span>
<span id="cb13-63"><a href="#cb13-63"></a>            <span class="dt">ldh                       =</span> <span class="dv">244</span>,</span>
<span id="cb13-64"><a href="#cb13-64"></a>            <span class="dt">crp                       =</span> <span class="dv">48</span>,</span>
<span id="cb13-65"><a href="#cb13-65"></a>            <span class="dt">albumin                   =</span> <span class="dv">39</span>,</span>
<span id="cb13-66"><a href="#cb13-66"></a>            <span class="dt">urea                      =</span> <span class="fl">6.5</span>,</span>
<span id="cb13-67"><a href="#cb13-67"></a>            <span class="dt">calculatePredictionButton =</span> <span class="st">&quot;click&quot;</span></span>
<span id="cb13-68"><a href="#cb13-68"></a>        )</span>
<span id="cb13-69"><a href="#cb13-69"></a>        </span>
<span id="cb13-70"><a href="#cb13-70"></a>        testthat<span class="op">::</span><span class="kw">test_that</span>(</span>
<span id="cb13-71"><a href="#cb13-71"></a>            <span class="st">&quot;Non admissible respiratory rate (lower)&quot;</span>,</span>
<span id="cb13-72"><a href="#cb13-72"></a>            testthat<span class="op">::</span><span class="kw">expect_equal</span>(</span>
<span id="cb13-73"><a href="#cb13-73"></a>                <span class="kw">admissibleInput</span>(),</span>
<span id="cb13-74"><a href="#cb13-74"></a>                <span class="ot">FALSE</span></span>
<span id="cb13-75"><a href="#cb13-75"></a>            )</span>
<span id="cb13-76"><a href="#cb13-76"></a>        )</span>
<span id="cb13-77"><a href="#cb13-77"></a>        </span>
<span id="cb13-78"><a href="#cb13-78"></a>        <span class="co"># respiratory rate above admissible input</span></span>
<span id="cb13-79"><a href="#cb13-79"></a>        session<span class="op">$</span><span class="kw">setInputs</span>(</span>
<span id="cb13-80"><a href="#cb13-80"></a>            <span class="dt">age                       =</span> <span class="dv">70</span>,</span>
<span id="cb13-81"><a href="#cb13-81"></a>            <span class="dt">respiratoryRate           =</span> <span class="dv">61</span>,</span>
<span id="cb13-82"><a href="#cb13-82"></a>            <span class="dt">ldh                       =</span> <span class="dv">244</span>,</span>
<span id="cb13-83"><a href="#cb13-83"></a>            <span class="dt">crp                       =</span> <span class="dv">48</span>,</span>
<span id="cb13-84"><a href="#cb13-84"></a>            <span class="dt">albumin                   =</span> <span class="dv">39</span>,</span>
<span id="cb13-85"><a href="#cb13-85"></a>            <span class="dt">urea                      =</span> <span class="fl">6.5</span>,</span>
<span id="cb13-86"><a href="#cb13-86"></a>            <span class="dt">calculatePredictionButton =</span> <span class="st">&quot;click&quot;</span></span>
<span id="cb13-87"><a href="#cb13-87"></a>        )</span>
<span id="cb13-88"><a href="#cb13-88"></a>        </span>
<span id="cb13-89"><a href="#cb13-89"></a>        testthat<span class="op">::</span><span class="kw">test_that</span>(</span>
<span id="cb13-90"><a href="#cb13-90"></a>            <span class="st">&quot;Non admissible respiratory rate (higher)&quot;</span>,</span>
<span id="cb13-91"><a href="#cb13-91"></a>            testthat<span class="op">::</span><span class="kw">expect_equal</span>(</span>
<span id="cb13-92"><a href="#cb13-92"></a>                <span class="kw">admissibleInput</span>(),</span>
<span id="cb13-93"><a href="#cb13-93"></a>                <span class="ot">FALSE</span></span>
<span id="cb13-94"><a href="#cb13-94"></a>            )</span>
<span id="cb13-95"><a href="#cb13-95"></a>        )</span>
<span id="cb13-96"><a href="#cb13-96"></a>        </span>
<span id="cb13-97"><a href="#cb13-97"></a>        <span class="co"># respiratory rate as character input</span></span>
<span id="cb13-98"><a href="#cb13-98"></a>        session<span class="op">$</span><span class="kw">setInputs</span>(</span>
<span id="cb13-99"><a href="#cb13-99"></a>            <span class="dt">age                       =</span> <span class="dv">70</span>,</span>
<span id="cb13-100"><a href="#cb13-100"></a>            <span class="dt">respiratoryRate           =</span> <span class="st">&quot;ten&quot;</span>,</span>
<span id="cb13-101"><a href="#cb13-101"></a>            <span class="dt">ldh                       =</span> <span class="dv">244</span>,</span>
<span id="cb13-102"><a href="#cb13-102"></a>            <span class="dt">crp                       =</span> <span class="dv">48</span>,</span>
<span id="cb13-103"><a href="#cb13-103"></a>            <span class="dt">albumin                   =</span> <span class="dv">39</span>,</span>
<span id="cb13-104"><a href="#cb13-104"></a>            <span class="dt">urea                      =</span> <span class="fl">6.5</span>,</span>
<span id="cb13-105"><a href="#cb13-105"></a>            <span class="dt">calculatePredictionButton =</span> <span class="st">&quot;click&quot;</span></span>
<span id="cb13-106"><a href="#cb13-106"></a>        )</span>
<span id="cb13-107"><a href="#cb13-107"></a>        </span>
<span id="cb13-108"><a href="#cb13-108"></a>        testthat<span class="op">::</span><span class="kw">test_that</span>(</span>
<span id="cb13-109"><a href="#cb13-109"></a>            <span class="st">&quot;Non admissible respiratory rate (character)&quot;</span>,</span>
<span id="cb13-110"><a href="#cb13-110"></a>            testthat<span class="op">::</span><span class="kw">expect_equal</span>(</span>
<span id="cb13-111"><a href="#cb13-111"></a>                <span class="kw">admissibleInput</span>(),</span>
<span id="cb13-112"><a href="#cb13-112"></a>                <span class="ot">FALSE</span></span>
<span id="cb13-113"><a href="#cb13-113"></a>            )</span>
<span id="cb13-114"><a href="#cb13-114"></a>        )</span>
<span id="cb13-115"><a href="#cb13-115"></a>        </span>
<span id="cb13-116"><a href="#cb13-116"></a>        <span class="co"># ldh above admissible input    </span></span>
<span id="cb13-117"><a href="#cb13-117"></a>        session<span class="op">$</span><span class="kw">setInputs</span>(</span>
<span id="cb13-118"><a href="#cb13-118"></a>            <span class="dt">age                       =</span> <span class="dv">70</span>,</span>
<span id="cb13-119"><a href="#cb13-119"></a>            <span class="dt">respiratoryRate           =</span> <span class="dv">45</span>,</span>
<span id="cb13-120"><a href="#cb13-120"></a>            <span class="dt">ldh                       =</span> <span class="dv">4001</span>,</span>
<span id="cb13-121"><a href="#cb13-121"></a>            <span class="dt">crp                       =</span> <span class="dv">48</span>,</span>
<span id="cb13-122"><a href="#cb13-122"></a>            <span class="dt">albumin                   =</span> <span class="dv">39</span>,</span>
<span id="cb13-123"><a href="#cb13-123"></a>            <span class="dt">urea                      =</span> <span class="fl">6.5</span>,</span>
<span id="cb13-124"><a href="#cb13-124"></a>            <span class="dt">calculatePredictionButton =</span> <span class="st">&quot;click&quot;</span></span>
<span id="cb13-125"><a href="#cb13-125"></a>        )</span>
<span id="cb13-126"><a href="#cb13-126"></a>        </span>
<span id="cb13-127"><a href="#cb13-127"></a>        testthat<span class="op">::</span><span class="kw">test_that</span>(</span>
<span id="cb13-128"><a href="#cb13-128"></a>            <span class="st">&quot;Non admissible LDH (higher)&quot;</span>,</span>
<span id="cb13-129"><a href="#cb13-129"></a>            testthat<span class="op">::</span><span class="kw">expect_equal</span>(</span>
<span id="cb13-130"><a href="#cb13-130"></a>                <span class="kw">admissibleInput</span>(),</span>
<span id="cb13-131"><a href="#cb13-131"></a>                <span class="ot">FALSE</span></span>
<span id="cb13-132"><a href="#cb13-132"></a>            )</span>
<span id="cb13-133"><a href="#cb13-133"></a>        )</span>
<span id="cb13-134"><a href="#cb13-134"></a>        </span>
<span id="cb13-135"><a href="#cb13-135"></a>        <span class="co"># ldh below admissible input    </span></span>
<span id="cb13-136"><a href="#cb13-136"></a>        session<span class="op">$</span><span class="kw">setInputs</span>(</span>
<span id="cb13-137"><a href="#cb13-137"></a>            <span class="dt">age                       =</span> <span class="dv">70</span>,</span>
<span id="cb13-138"><a href="#cb13-138"></a>            <span class="dt">respiratoryRate           =</span> <span class="dv">45</span>,</span>
<span id="cb13-139"><a href="#cb13-139"></a>            <span class="dt">ldh                       =</span> <span class="dv">49</span>,</span>
<span id="cb13-140"><a href="#cb13-140"></a>            <span class="dt">crp                       =</span> <span class="dv">48</span>,</span>
<span id="cb13-141"><a href="#cb13-141"></a>            <span class="dt">albumin                   =</span> <span class="dv">39</span>,</span>
<span id="cb13-142"><a href="#cb13-142"></a>            <span class="dt">urea                      =</span> <span class="fl">6.5</span>,</span>
<span id="cb13-143"><a href="#cb13-143"></a>            <span class="dt">calculatePredictionButton =</span> <span class="st">&quot;click&quot;</span></span>
<span id="cb13-144"><a href="#cb13-144"></a>        )</span>
<span id="cb13-145"><a href="#cb13-145"></a>        </span>
<span id="cb13-146"><a href="#cb13-146"></a>        testthat<span class="op">::</span><span class="kw">test_that</span>(</span>
<span id="cb13-147"><a href="#cb13-147"></a>            <span class="st">&quot;Non admissible LDH (lower)&quot;</span>,</span>
<span id="cb13-148"><a href="#cb13-148"></a>            testthat<span class="op">::</span><span class="kw">expect_equal</span>(</span>
<span id="cb13-149"><a href="#cb13-149"></a>                <span class="kw">admissibleInput</span>(),</span>
<span id="cb13-150"><a href="#cb13-150"></a>                <span class="ot">FALSE</span></span>
<span id="cb13-151"><a href="#cb13-151"></a>            )</span>
<span id="cb13-152"><a href="#cb13-152"></a>        )</span>
<span id="cb13-153"><a href="#cb13-153"></a>        <span class="co"># ldh as character input    </span></span>
<span id="cb13-154"><a href="#cb13-154"></a>        session<span class="op">$</span><span class="kw">setInputs</span>(</span>
<span id="cb13-155"><a href="#cb13-155"></a>            <span class="dt">age                       =</span> <span class="dv">70</span>,</span>
<span id="cb13-156"><a href="#cb13-156"></a>            <span class="dt">respiratoryRate           =</span> <span class="dv">45</span>,</span>
<span id="cb13-157"><a href="#cb13-157"></a>            <span class="dt">ldh                       =</span> <span class="st">&quot;two hundred&quot;</span>,</span>
<span id="cb13-158"><a href="#cb13-158"></a>            <span class="dt">crp                       =</span> <span class="dv">48</span>,</span>
<span id="cb13-159"><a href="#cb13-159"></a>            <span class="dt">albumin                   =</span> <span class="dv">39</span>,</span>
<span id="cb13-160"><a href="#cb13-160"></a>            <span class="dt">urea                      =</span> <span class="fl">6.5</span>,</span>
<span id="cb13-161"><a href="#cb13-161"></a>            <span class="dt">calculatePredictionButton =</span> <span class="st">&quot;click&quot;</span></span>
<span id="cb13-162"><a href="#cb13-162"></a>        )</span>
<span id="cb13-163"><a href="#cb13-163"></a>        </span>
<span id="cb13-164"><a href="#cb13-164"></a>        testthat<span class="op">::</span><span class="kw">test_that</span>(</span>
<span id="cb13-165"><a href="#cb13-165"></a>            <span class="st">&quot;Non admissible LDH (character)&quot;</span>,</span>
<span id="cb13-166"><a href="#cb13-166"></a>            testthat<span class="op">::</span><span class="kw">expect_equal</span>(</span>
<span id="cb13-167"><a href="#cb13-167"></a>                <span class="kw">admissibleInput</span>(),</span>
<span id="cb13-168"><a href="#cb13-168"></a>                <span class="ot">FALSE</span></span>
<span id="cb13-169"><a href="#cb13-169"></a>            )</span>
<span id="cb13-170"><a href="#cb13-170"></a>        )</span>
<span id="cb13-171"><a href="#cb13-171"></a>        </span>
<span id="cb13-172"><a href="#cb13-172"></a>        <span class="co"># crp below admissible input</span></span>
<span id="cb13-173"><a href="#cb13-173"></a>        session<span class="op">$</span><span class="kw">setInputs</span>(</span>
<span id="cb13-174"><a href="#cb13-174"></a>            <span class="dt">age                       =</span> <span class="dv">70</span>,</span>
<span id="cb13-175"><a href="#cb13-175"></a>            <span class="dt">respiratoryRate           =</span> <span class="dv">45</span>,</span>
<span id="cb13-176"><a href="#cb13-176"></a>            <span class="dt">ldh                       =</span> <span class="dv">244</span>,</span>
<span id="cb13-177"><a href="#cb13-177"></a>            <span class="dt">crp                       =</span> <span class="dv">0</span>,</span>
<span id="cb13-178"><a href="#cb13-178"></a>            <span class="dt">albumin                   =</span> <span class="dv">39</span>,</span>
<span id="cb13-179"><a href="#cb13-179"></a>            <span class="dt">urea                      =</span> <span class="fl">6.5</span>,</span>
<span id="cb13-180"><a href="#cb13-180"></a>            <span class="dt">calculatePredictionButton =</span> <span class="st">&quot;click&quot;</span></span>
<span id="cb13-181"><a href="#cb13-181"></a>        )</span>
<span id="cb13-182"><a href="#cb13-182"></a>        </span>
<span id="cb13-183"><a href="#cb13-183"></a>        testthat<span class="op">::</span><span class="kw">test_that</span>(</span>
<span id="cb13-184"><a href="#cb13-184"></a>            <span class="st">&quot;Non admissible CRP (lower)&quot;</span>,</span>
<span id="cb13-185"><a href="#cb13-185"></a>            testthat<span class="op">::</span><span class="kw">expect_equal</span>(</span>
<span id="cb13-186"><a href="#cb13-186"></a>                <span class="kw">admissibleInput</span>(),</span>
<span id="cb13-187"><a href="#cb13-187"></a>                <span class="ot">FALSE</span></span>
<span id="cb13-188"><a href="#cb13-188"></a>            )</span>
<span id="cb13-189"><a href="#cb13-189"></a>        )</span>
<span id="cb13-190"><a href="#cb13-190"></a>        </span>
<span id="cb13-191"><a href="#cb13-191"></a>        <span class="co"># crp above admissible input    </span></span>
<span id="cb13-192"><a href="#cb13-192"></a>        session<span class="op">$</span><span class="kw">setInputs</span>(</span>
<span id="cb13-193"><a href="#cb13-193"></a>            <span class="dt">age                       =</span> <span class="dv">70</span>,</span>
<span id="cb13-194"><a href="#cb13-194"></a>            <span class="dt">respiratoryRate           =</span> <span class="dv">45</span>,</span>
<span id="cb13-195"><a href="#cb13-195"></a>            <span class="dt">ldh                       =</span> <span class="dv">244</span>,</span>
<span id="cb13-196"><a href="#cb13-196"></a>            <span class="dt">crp                       =</span> <span class="dv">501</span>,</span>
<span id="cb13-197"><a href="#cb13-197"></a>            <span class="dt">albumin                   =</span> <span class="dv">39</span>,</span>
<span id="cb13-198"><a href="#cb13-198"></a>            <span class="dt">urea                      =</span> <span class="fl">6.5</span>,</span>
<span id="cb13-199"><a href="#cb13-199"></a>            <span class="dt">calculatePredictionButton =</span> <span class="st">&quot;click&quot;</span></span>
<span id="cb13-200"><a href="#cb13-200"></a>        )</span>
<span id="cb13-201"><a href="#cb13-201"></a>        </span>
<span id="cb13-202"><a href="#cb13-202"></a>        testthat<span class="op">::</span><span class="kw">test_that</span>(</span>
<span id="cb13-203"><a href="#cb13-203"></a>            <span class="st">&quot;Non admissible CRP (higher)&quot;</span>,</span>
<span id="cb13-204"><a href="#cb13-204"></a>            testthat<span class="op">::</span><span class="kw">expect_equal</span>(</span>
<span id="cb13-205"><a href="#cb13-205"></a>                <span class="kw">admissibleInput</span>(),</span>
<span id="cb13-206"><a href="#cb13-206"></a>                <span class="ot">FALSE</span></span>
<span id="cb13-207"><a href="#cb13-207"></a>            )</span>
<span id="cb13-208"><a href="#cb13-208"></a>        )</span>
<span id="cb13-209"><a href="#cb13-209"></a>        </span>
<span id="cb13-210"><a href="#cb13-210"></a>        <span class="co"># crp as character input</span></span>
<span id="cb13-211"><a href="#cb13-211"></a>        session<span class="op">$</span><span class="kw">setInputs</span>(</span>
<span id="cb13-212"><a href="#cb13-212"></a>            <span class="dt">age                       =</span> <span class="dv">70</span>,</span>
<span id="cb13-213"><a href="#cb13-213"></a>            <span class="dt">respiratoryRate           =</span> <span class="dv">45</span>,</span>
<span id="cb13-214"><a href="#cb13-214"></a>            <span class="dt">ldh                       =</span> <span class="dv">244</span>,</span>
<span id="cb13-215"><a href="#cb13-215"></a>            <span class="dt">crp                       =</span> <span class="st">&quot;two hundred&quot;</span>,</span>
<span id="cb13-216"><a href="#cb13-216"></a>            <span class="dt">albumin                   =</span> <span class="dv">39</span>,</span>
<span id="cb13-217"><a href="#cb13-217"></a>            <span class="dt">urea                      =</span> <span class="fl">6.5</span>,</span>
<span id="cb13-218"><a href="#cb13-218"></a>            <span class="dt">calculatePredictionButton =</span> <span class="st">&quot;click&quot;</span></span>
<span id="cb13-219"><a href="#cb13-219"></a>        )</span>
<span id="cb13-220"><a href="#cb13-220"></a>        </span>
<span id="cb13-221"><a href="#cb13-221"></a>        testthat<span class="op">::</span><span class="kw">test_that</span>(</span>
<span id="cb13-222"><a href="#cb13-222"></a>            <span class="st">&quot;Non admissible CRP (character)&quot;</span>,</span>
<span id="cb13-223"><a href="#cb13-223"></a>            testthat<span class="op">::</span><span class="kw">expect_equal</span>(</span>
<span id="cb13-224"><a href="#cb13-224"></a>                <span class="kw">admissibleInput</span>(),</span>
<span id="cb13-225"><a href="#cb13-225"></a>                <span class="ot">FALSE</span></span>
<span id="cb13-226"><a href="#cb13-226"></a>            )</span>
<span id="cb13-227"><a href="#cb13-227"></a>        )</span>
<span id="cb13-228"><a href="#cb13-228"></a>        </span>
<span id="cb13-229"><a href="#cb13-229"></a>        <span class="co"># albumin below admissible input</span></span>
<span id="cb13-230"><a href="#cb13-230"></a>        session<span class="op">$</span><span class="kw">setInputs</span>(</span>
<span id="cb13-231"><a href="#cb13-231"></a>            <span class="dt">age                       =</span> <span class="dv">70</span>,</span>
<span id="cb13-232"><a href="#cb13-232"></a>            <span class="dt">respiratoryRate           =</span> <span class="dv">45</span>,</span>
<span id="cb13-233"><a href="#cb13-233"></a>            <span class="dt">ldh                       =</span> <span class="dv">244</span>,</span>
<span id="cb13-234"><a href="#cb13-234"></a>            <span class="dt">crp                       =</span> <span class="dv">48</span>,</span>
<span id="cb13-235"><a href="#cb13-235"></a>            <span class="dt">albumin                   =</span> <span class="dv">9</span>,</span>
<span id="cb13-236"><a href="#cb13-236"></a>            <span class="dt">urea                      =</span> <span class="fl">6.5</span>,</span>
<span id="cb13-237"><a href="#cb13-237"></a>            <span class="dt">calculatePredictionButton =</span> <span class="st">&quot;click&quot;</span></span>
<span id="cb13-238"><a href="#cb13-238"></a>        )</span>
<span id="cb13-239"><a href="#cb13-239"></a>        </span>
<span id="cb13-240"><a href="#cb13-240"></a>        testthat<span class="op">::</span><span class="kw">test_that</span>(</span>
<span id="cb13-241"><a href="#cb13-241"></a>            <span class="st">&quot;Non admissible albumin (lower)&quot;</span>,</span>
<span id="cb13-242"><a href="#cb13-242"></a>            testthat<span class="op">::</span><span class="kw">expect_equal</span>(</span>
<span id="cb13-243"><a href="#cb13-243"></a>                <span class="kw">admissibleInput</span>(),</span>
<span id="cb13-244"><a href="#cb13-244"></a>                <span class="ot">FALSE</span></span>
<span id="cb13-245"><a href="#cb13-245"></a>            )</span>
<span id="cb13-246"><a href="#cb13-246"></a>        )</span>
<span id="cb13-247"><a href="#cb13-247"></a>        </span>
<span id="cb13-248"><a href="#cb13-248"></a>        <span class="co"># albumin above admissible input</span></span>
<span id="cb13-249"><a href="#cb13-249"></a>        session<span class="op">$</span><span class="kw">setInputs</span>(</span>
<span id="cb13-250"><a href="#cb13-250"></a>            <span class="dt">age                       =</span> <span class="dv">70</span>,</span>
<span id="cb13-251"><a href="#cb13-251"></a>            <span class="dt">respiratoryRate           =</span> <span class="dv">45</span>,</span>
<span id="cb13-252"><a href="#cb13-252"></a>            <span class="dt">ldh                       =</span> <span class="dv">244</span>,</span>
<span id="cb13-253"><a href="#cb13-253"></a>            <span class="dt">crp                       =</span> <span class="dv">48</span>,</span>
<span id="cb13-254"><a href="#cb13-254"></a>            <span class="dt">albumin                   =</span> <span class="dv">61</span>,</span>
<span id="cb13-255"><a href="#cb13-255"></a>            <span class="dt">urea                      =</span> <span class="fl">6.5</span>,</span>
<span id="cb13-256"><a href="#cb13-256"></a>            <span class="dt">calculatePredictionButton =</span> <span class="st">&quot;click&quot;</span></span>
<span id="cb13-257"><a href="#cb13-257"></a>        )</span>
<span id="cb13-258"><a href="#cb13-258"></a>        </span>
<span id="cb13-259"><a href="#cb13-259"></a>        testthat<span class="op">::</span><span class="kw">test_that</span>(</span>
<span id="cb13-260"><a href="#cb13-260"></a>            <span class="st">&quot;Non admissible albumin (higher)&quot;</span>,</span>
<span id="cb13-261"><a href="#cb13-261"></a>            testthat<span class="op">::</span><span class="kw">expect_equal</span>(</span>
<span id="cb13-262"><a href="#cb13-262"></a>                <span class="kw">admissibleInput</span>(),</span>
<span id="cb13-263"><a href="#cb13-263"></a>                <span class="ot">FALSE</span></span>
<span id="cb13-264"><a href="#cb13-264"></a>            )</span>
<span id="cb13-265"><a href="#cb13-265"></a>        )</span>
<span id="cb13-266"><a href="#cb13-266"></a>        </span>
<span id="cb13-267"><a href="#cb13-267"></a>        <span class="co"># albumin as character input</span></span>
<span id="cb13-268"><a href="#cb13-268"></a>        session<span class="op">$</span><span class="kw">setInputs</span>(</span>
<span id="cb13-269"><a href="#cb13-269"></a>            <span class="dt">age                       =</span> <span class="dv">70</span>,</span>
<span id="cb13-270"><a href="#cb13-270"></a>            <span class="dt">respiratoryRate           =</span> <span class="dv">45</span>,</span>
<span id="cb13-271"><a href="#cb13-271"></a>            <span class="dt">ldh                       =</span> <span class="dv">244</span>,</span>
<span id="cb13-272"><a href="#cb13-272"></a>            <span class="dt">crp                       =</span> <span class="dv">48</span>,</span>
<span id="cb13-273"><a href="#cb13-273"></a>            <span class="dt">albumin                   =</span> <span class="st">&quot;twenty&quot;</span>,</span>
<span id="cb13-274"><a href="#cb13-274"></a>            <span class="dt">urea                      =</span> <span class="fl">6.5</span>,</span>
<span id="cb13-275"><a href="#cb13-275"></a>            <span class="dt">calculatePredictionButton =</span> <span class="st">&quot;click&quot;</span></span>
<span id="cb13-276"><a href="#cb13-276"></a>        )</span>
<span id="cb13-277"><a href="#cb13-277"></a>        </span>
<span id="cb13-278"><a href="#cb13-278"></a>        testthat<span class="op">::</span><span class="kw">test_that</span>(</span>
<span id="cb13-279"><a href="#cb13-279"></a>            <span class="st">&quot;Non admissible albumin (character)&quot;</span>,</span>
<span id="cb13-280"><a href="#cb13-280"></a>            testthat<span class="op">::</span><span class="kw">expect_equal</span>(</span>
<span id="cb13-281"><a href="#cb13-281"></a>                <span class="kw">admissibleInput</span>(),</span>
<span id="cb13-282"><a href="#cb13-282"></a>                <span class="ot">FALSE</span></span>
<span id="cb13-283"><a href="#cb13-283"></a>            )</span>
<span id="cb13-284"><a href="#cb13-284"></a>        )</span>
<span id="cb13-285"><a href="#cb13-285"></a>        </span>
<span id="cb13-286"><a href="#cb13-286"></a>        <span class="co"># urea below admissible input</span></span>
<span id="cb13-287"><a href="#cb13-287"></a>        session<span class="op">$</span><span class="kw">setInputs</span>(</span>
<span id="cb13-288"><a href="#cb13-288"></a>            <span class="dt">age                       =</span> <span class="dv">70</span>,</span>
<span id="cb13-289"><a href="#cb13-289"></a>            <span class="dt">respiratoryRate           =</span> <span class="dv">45</span>,</span>
<span id="cb13-290"><a href="#cb13-290"></a>            <span class="dt">ldh                       =</span> <span class="dv">244</span>,</span>
<span id="cb13-291"><a href="#cb13-291"></a>            <span class="dt">crp                       =</span> <span class="dv">48</span>,</span>
<span id="cb13-292"><a href="#cb13-292"></a>            <span class="dt">albumin                   =</span> <span class="dv">20</span>,</span>
<span id="cb13-293"><a href="#cb13-293"></a>            <span class="dt">urea                      =</span> <span class="dv">0</span>,</span>
<span id="cb13-294"><a href="#cb13-294"></a>            <span class="dt">calculatePredictionButton =</span> <span class="st">&quot;click&quot;</span></span>
<span id="cb13-295"><a href="#cb13-295"></a>        )</span>
<span id="cb13-296"><a href="#cb13-296"></a>        </span>
<span id="cb13-297"><a href="#cb13-297"></a>        testthat<span class="op">::</span><span class="kw">test_that</span>(</span>
<span id="cb13-298"><a href="#cb13-298"></a>            <span class="st">&quot;Non admissible albumin (lower)&quot;</span>,</span>
<span id="cb13-299"><a href="#cb13-299"></a>            testthat<span class="op">::</span><span class="kw">expect_equal</span>(</span>
<span id="cb13-300"><a href="#cb13-300"></a>                <span class="kw">admissibleInput</span>(),</span>
<span id="cb13-301"><a href="#cb13-301"></a>                <span class="ot">FALSE</span></span>
<span id="cb13-302"><a href="#cb13-302"></a>            )</span>
<span id="cb13-303"><a href="#cb13-303"></a>        )</span>
<span id="cb13-304"><a href="#cb13-304"></a>        </span>
<span id="cb13-305"><a href="#cb13-305"></a>        <span class="co"># urea above admissible input</span></span>
<span id="cb13-306"><a href="#cb13-306"></a>        session<span class="op">$</span><span class="kw">setInputs</span>(</span>
<span id="cb13-307"><a href="#cb13-307"></a>            <span class="dt">age                       =</span> <span class="dv">70</span>,</span>
<span id="cb13-308"><a href="#cb13-308"></a>            <span class="dt">respiratoryRate           =</span> <span class="dv">45</span>,</span>
<span id="cb13-309"><a href="#cb13-309"></a>            <span class="dt">ldh                       =</span> <span class="dv">244</span>,</span>
<span id="cb13-310"><a href="#cb13-310"></a>            <span class="dt">crp                       =</span> <span class="dv">48</span>,</span>
<span id="cb13-311"><a href="#cb13-311"></a>            <span class="dt">albumin                   =</span> <span class="dv">20</span>,</span>
<span id="cb13-312"><a href="#cb13-312"></a>            <span class="dt">urea                      =</span> <span class="dv">81</span>,</span>
<span id="cb13-313"><a href="#cb13-313"></a>            <span class="dt">calculatePredictionButton =</span> <span class="st">&quot;click&quot;</span></span>
<span id="cb13-314"><a href="#cb13-314"></a>        )</span>
<span id="cb13-315"><a href="#cb13-315"></a>        </span>
<span id="cb13-316"><a href="#cb13-316"></a>        testthat<span class="op">::</span><span class="kw">test_that</span>(</span>
<span id="cb13-317"><a href="#cb13-317"></a>            <span class="st">&quot;Non admissible albumin (higher)&quot;</span>,</span>
<span id="cb13-318"><a href="#cb13-318"></a>            testthat<span class="op">::</span><span class="kw">expect_equal</span>(</span>
<span id="cb13-319"><a href="#cb13-319"></a>                <span class="kw">admissibleInput</span>(),</span>
<span id="cb13-320"><a href="#cb13-320"></a>                <span class="ot">FALSE</span></span>
<span id="cb13-321"><a href="#cb13-321"></a>            )</span>
<span id="cb13-322"><a href="#cb13-322"></a>        )</span>
<span id="cb13-323"><a href="#cb13-323"></a>        </span>
<span id="cb13-324"><a href="#cb13-324"></a>        <span class="co"># urea as character input</span></span>
<span id="cb13-325"><a href="#cb13-325"></a>        session<span class="op">$</span><span class="kw">setInputs</span>(</span>
<span id="cb13-326"><a href="#cb13-326"></a>            <span class="dt">age                       =</span> <span class="dv">70</span>,</span>
<span id="cb13-327"><a href="#cb13-327"></a>            <span class="dt">respiratoryRate           =</span> <span class="dv">45</span>,</span>
<span id="cb13-328"><a href="#cb13-328"></a>            <span class="dt">ldh                       =</span> <span class="dv">244</span>,</span>
<span id="cb13-329"><a href="#cb13-329"></a>            <span class="dt">crp                       =</span> <span class="dv">48</span>,</span>
<span id="cb13-330"><a href="#cb13-330"></a>            <span class="dt">albumin                   =</span> <span class="dv">20</span>,</span>
<span id="cb13-331"><a href="#cb13-331"></a>            <span class="dt">urea                      =</span> <span class="st">&quot;four&quot;</span>,</span>
<span id="cb13-332"><a href="#cb13-332"></a>            <span class="dt">calculatePredictionButton =</span> <span class="st">&quot;click&quot;</span></span>
<span id="cb13-333"><a href="#cb13-333"></a>        )</span>
<span id="cb13-334"><a href="#cb13-334"></a>        </span>
<span id="cb13-335"><a href="#cb13-335"></a>        testthat<span class="op">::</span><span class="kw">test_that</span>(</span>
<span id="cb13-336"><a href="#cb13-336"></a>            <span class="st">&quot;Non admissible albumin (character)&quot;</span>,</span>
<span id="cb13-337"><a href="#cb13-337"></a>            testthat<span class="op">::</span><span class="kw">expect_equal</span>(</span>
<span id="cb13-338"><a href="#cb13-338"></a>                <span class="kw">admissibleInput</span>(),</span>
<span id="cb13-339"><a href="#cb13-339"></a>                <span class="ot">FALSE</span></span>
<span id="cb13-340"><a href="#cb13-340"></a>            )</span>
<span id="cb13-341"><a href="#cb13-341"></a>        )</span>
<span id="cb13-342"><a href="#cb13-342"></a>    }</span>
<span id="cb13-343"><a href="#cb13-343"></a>)</span></code></pre></div>
<pre><code>## Test passed 
## Test passed 
## Test passed 
## Test passed 
## Test passed 
## Test passed 
## Test passed 
## Test passed 
## Test passed 
## Test passed 
## Test passed 
## Test passed 
## Test passed 
## Test passed 
## Test passed 
## Test passed 
## Test passed 
## Test passed
</code></pre>

</body>
</html>
